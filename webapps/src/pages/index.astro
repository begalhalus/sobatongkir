---
import { Layout } from "@globals";
---

<Layout title="Cek Ongkir">
  <style>
    .select2-compact selectct2-container .select2-selection--single {
      height: 38px;
      padding-top: 3px;
    }
    .select2-compact + .select2-container .select2-selection__arrow {
      height: 36px;
    }
    .select2-compact + .select2-container .select2-selection__rendered {
      padding-left: 12px;
    }

    @media (max-width: 768px) {
      .flex-grow-1 {
        min-width: 100% !important;
      }
      .btn {
        height: 42px !important;
        margin-top: 5px;
      }
    }
  </style>
  <!-- Start Switcher -->
  <div
    class="offcanvas offcanvas-end"
    tabindex="-1"
    id="switcher-canvas"
    aria-labelledby="offcanvasRightLabel"
  >
    <div class="offcanvas-header border-bottom">
      <h5 class="offcanvas-title" id="offcanvasRightLabel">Switcher</h5>
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="offcanvas"
        aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="">
        <p class="switcher-style-head">Theme Color Mode:</p>
        <div class="row switcher-style">
          <div class="col-4">
            <div class="form-check switch-select">
              <label class="form-check-label" for="switcher-light-theme">
                Light
              </label>
              <input
                class="form-check-input"
                type="radio"
                name="theme-style"
                id="switcher-light-theme"
                checked
              />
            </div>
          </div>
          <div class="col-4">
            <div class="form-check switch-select">
              <label class="form-check-label" for="switcher-dark-theme">
                Dark
              </label>
              <input
                class="form-check-input"
                type="radio"
                name="theme-style"
                id="switcher-dark-theme"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="">
        <p class="switcher-style-head">Directions:</p>
        <div class="row switcher-style">
          <div class="col-4">
            <div class="form-check switch-select">
              <label class="form-check-label" for="switcher-ltr"> LTR</label>
              <input
                class="form-check-input"
                type="radio"
                name="direction"
                id="switcher-ltr"
                checked
              />
            </div>
          </div>
          <div class="col-4">
            <div class="form-check switch-select">
              <label class="form-check-label" for="switcher-rtl"> RTL</label>
              <input
                class="form-check-input"
                type="radio"
                name="direction"
                id="switcher-rtl"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="theme-colors">
        <p class="switcher-style-head">Theme Primary:</p>
        <div class="d-flex align-items-center switcher-style">
          <div class="form-check switch-select me-3">
            <input
              class="form-check-input color-input color-primary-1"
              type="radio"
              name="theme-primary"
              id="switcher-primary"
            />
          </div>
          <div class="form-check switch-select me-3">
            <input
              class="form-check-input color-input color-primary-2"
              type="radio"
              name="theme-primary"
              id="switcher-primary1"
            />
          </div>
          <div class="form-check switch-select me-3">
            <input
              class="form-check-input color-input color-primary-3"
              type="radio"
              name="theme-primary"
              id="switcher-primary2"
            />
          </div>
          <div class="form-check switch-select me-3">
            <input
              class="form-check-input color-input color-primary-4"
              type="radio"
              name="theme-primary"
              id="switcher-primary3"
            />
          </div>
          <div class="form-check switch-select me-3">
            <input
              class="form-check-input color-input color-primary-5"
              type="radio"
              name="theme-primary"
              id="switcher-primary4"
            />
          </div>
          <div
            class="form-check switch-select me-3 ps-0 mt-1 color-primary-light"
          >
            <div class="theme-container-primary"></div>
            <div class="pickr-container-primary"></div>
          </div>
        </div>
      </div>
      <div>
        <p class="switcher-style-head">reset:</p>
        <div class="text-center">
          <button id="reset-all" class="btn btn-danger mt-3">Reset</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End Switcher -->

  <div class="landing-page-wrapper">
    <!-- app-header -->
    <header class="app-header">
      <!-- Start::main-header-container -->
      <div class="main-header-container container-fluid">
        <!-- Start::header-content-left -->
        <div class="header-content-left">
          <!-- Start::header-element -->
          <div class="header-element">
            <div class="horizontal-logo">
              <a href="index.html" class="header-logo">
                <img
                  src="/images/brand-logos/toggle-logo.png"
                  alt="logo"
                  class="toggle-logo"
                />
                <img
                  src="/images/brand-logos/toggle-dark.png"
                  alt="logo"
                  class="toggle-dark"
                />
              </a>
            </div>
          </div>
          <!-- End::header-element -->

          <!-- Start::header-element -->
          <div class="header-element">
            <!-- Start::header-link -->
            <a
              href="javascript:void(0);"
              class="sidemenu-toggle header-link"
              data-bs-toggle="sidebar"
            >
              <span class="open-toggle">
                <i class="ri-menu-3-line fs-20"></i>
              </span>
            </a>
            <!-- End::header-link -->
          </div>
          <!-- End::header-element -->
        </div>
        <!-- End::header-content-left -->

        <!-- Start::header-content-right -->
        <div class="header-content-right">
          <!-- Start::header-element -->
          <div class="header-element align-items-center">
            <!-- Start::header-link|switcher-icon -->
            <div class="btn-list d-lg-none d-block">
              <a href="sign-up-basic.html" class="btn btn-primary-light">
                Sign Up
              </a>
              <button
                class="btn btn-icon btn-success switcher-icon"
                data-bs-toggle="offcanvas"
                data-bs-target="#switcher-canvas"
              >
                <i class="ri-settings-3-line"></i>
              </button>
            </div>
            <!-- End::header-link|switcher-icon -->
          </div>
          <!-- End::header-element -->
        </div>
        <!-- End::header-content-right -->
      </div>
      <!-- End::main-header-container -->
    </header>
    <!-- /app-header -->

    <!-- Start::app-sidebar -->
    <aside class="app-sidebar sticky" id="sidebar">
      <div class="container-xl">
        <!-- Start::main-sidebar -->
        <div class="main-sidebar">
          <!-- Start::nav -->
          <nav class="main-menu-container nav nav-pills sub-open">
            <div class="landing-logo-container">
              <div class="horizontal-logo">
                <a href="index.html" class="header-logo">
                  <img
                    src="/images/brand-logos/desktop-logo.png"
                    alt="logo"
                    class="desktop-logo"
                  />
                  <img
                    src="/images/brand-logos/desktop-white.png"
                    alt="logo"
                    class="desktop-white"
                  />
                </a>
              </div>
            </div>
            <div class="slide-left" id="slide-left">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="#7b8191"
                width="24"
                height="24"
                viewBox="0 0 24 24"
              >
                <path
                  d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"
                ></path>
              </svg>
            </div>
          </nav>
          <!-- End::nav -->
        </div>
        <!-- End::main-sidebar -->
      </div>
    </aside>
    <!-- End::app-sidebar -->

    <!-- Start::app-content -->
    <div class="main-content p-0 landing-main">
      <!-- Start:: Section-1 -->
      <div class="landing-banner" id="home">
        <section class="section pb-0">
          <div class="container main-banner-container">
            <div class="row justify-content-center text-center">
              <div class="col-xxl-9 col-xl-9 col-lg-10">
                <div class="">
                  <h5 class="landing-banner-heading mb-3">
                    <span class="text-secondary fw-bold"
                      >Cek Ongkos Kirim
                    </span>Dari berbagai Ekspedisi
                  </h5>
                  <p class="fs-18 mb-5 op-8 fw-normal text-fixed-white">
                    Lebih mudah cek tarif pengiriman dari berbagai ekspedisi
                    dalam 1 klik lewat SobatOngkir
                  </p>

                  <div class="mb-3">
                    <div
                      class="d-flex flex-wrap flex-lg-nowrap gap-2 align-items-end"
                    >
                      <!-- Input Asal -->
                      <div class="flex-grow-1">
                        <label class="form-label text-start w-100 small"
                          >Asal *</label
                        >
                        <select
                          class="form-control select2-compact"
                          id="originSelect"
                          name="originSelect"
                          style="width: 100%"></select>
                      </div>

                      <!-- Input Tujuan -->
                      <div class="flex-grow-1">
                        <label class="form-label text-start w-100 small"
                          >Tujuan *</label
                        >
                        <select
                          class="form-control"
                          id="destinationSelect"
                          name="destinationSelect"
                          style="width: 100%"
                        >
                        </select>
                      </div>

                      <!-- Input Berat -->
                      <div class="flex-grow-1" style="max-width: 150px;">
                        <label class="form-label text-start w-100 small"
                          >Berat *</label
                        >
                        <div class="input-group">
                          <input
                            type="number"
                            class="form-control"
                            id="weight"
                            name="weight"
                            value="1"
                          />
                          <span class="input-group-text bg-white">Kg</span>
                        </div>
                      </div>

                      <!-- Tombol Cari -->
                      <div class="flex-grow-1" style="min-width: 100px;">
                        <button id="btnCari" class="btn btn-primary"
                          >Cari</button
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div class="col-xl-12">
        <div class="load-data"></div>
      </div>

      <section class="section landing-testimonials">
        <div class="container text-center">
          <div class="row mb-5 justify-content-center text-center">
            <p class="fs-12 fw-semibold mb-1">
              <span class="landing-section-heading">TESTIMONIALS</span>
            </p>
            <h3 class="fw-semibold mb-2">
              We never failed to reach expectations
            </h3>
            <div class="col-xl-9">
              <span class="b-block fw-normal fs-15 text-muted"
                >Some of the reviews our clients gave which brings motivation to
                work for future projects.</span
              >
            </div>
          </div>
          <div class="swiper pagination-dynamic text-start">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/11.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Json Taylor
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          CEO OF NORJA
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/1.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Melissa Blue
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          MANAGER CHO
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/14.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Kiara Advain
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          CEO OF EMPIRO
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/8.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Jhonson Smith
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          CHIEF SECRETARY MBIO
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/4.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Dwayne Stort
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          CEO ARMEDILLO
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/9.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Jasmine Kova
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          AGGENT AMIO
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/10.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Dolph MR
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          CEO MR BRAND
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/13.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Brenda Simpson
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          CEO AIBMO
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
              <div class="swiper-slide">
                <div
                  class="card custom-card featured-card-1 border shadow-none"
                >
                  <div class="card-body p-4">
                    <span class="review-quote">
                      <i class="bi bi-quote"></i>
                    </span>
                    <div class="d-flex mb-2 align-items-center">
                      <span class="avatar avatar-lg avatar-rounded me-2">
                        <img src="/images/faces/6.jpg" alt="" />
                      </span>
                      <div>
                        <p class="mb-0 fw-semibold fs-16 text-primary">
                          Melissa Blue
                        </p>
                        <p class="fs-10 mb-0 fw-semibold text-muted">
                          MANAGER CHO
                        </p>
                      </div>
                    </div>
                    <span
                      >- Est amet sit vero sanctus labore no sed ipsum ipsum
                      nonumy. Sit ipsum sanctus ea magna est. Aliquyam sed amet.
                      Kasd diam rebum sit ipsum ipsum erat et kasd.Est amet sit
                      vero sanctus labor</span
                    >
                  </div>
                </div>
              </div>
            </div>
            <div class="swiper-pagination"></div>
          </div>
        </div>
      </section>
      <!-- End:: Section-11 -->

      <!-- Start:: Section-12 -->
      <section class="section bg-banner" id="career-advice">
        <div class="row justify-content-center">
          <div class="col-lg-6 text-center">
            <div class="mb-4">
              <h3 class="fw-semibold mb-2 text-fixed-white">
                &#128512; Mulai Kirim Paketmu Sekarang !
              </h3>
            </div>
            <span class="fs-15 fw-normal op-8 d-block mb-4 px-lg-0 px-3"
              >Jadikan pengalaman pengiriman paket lebih mudah dengan aplikasi
              SobatOngkir.
            </span>

            <a
              href="https://play.google.com/store/apps/details?id=com.sobatongkir"
              target="_blank"
            >
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg"
                alt="Get it on Google Play"
                style="height: 60px;"
              />
            </a>
          </div>
        </div>
      </section>
      <!-- End:: Section-12 -->

      <!-- Start:: Footer -->
      <div class="landing-main-footer py-3">
        <div class="container">
          <div
            class="d-flex flex-wrap gap-2 align-items-center justify-content-between"
          >
            <div>
              <span class="text-fixed-white op-7 fs-14">
                © Copyright <span id="year"></span>
                <a
                  href="javascript:void(0);"
                  class="text-primary fs-15 fw-semibold">Fery Rahmad</a
                >.
              </span>
            </div>
            <div>
              <ul class="list-unstyled fw-normal landing-footer-list mb-0">
                <li>
                  <a href="javascript:void(0);" class="text-fixed-white op-8"
                    >Terms Of Service</a
                  >
                </li>
                <li>
                  <a href="javascript:void(0);" class="text-fixed-white op-8"
                    >Privacy Policy</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- End:: Footer -->
    </div>
    <!-- End::app-content -->
  </div>
</Layout>
<script is:inline src="/libs/jquery/jquery.min.js"></script>

<!-- Tambahkan CSS & JS Select2 -->
<link
  href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
  rel="stylesheet"
/>
<script
  is:inline
  src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"
></script>

<script is:inline>
function actControl(x, y, z) {
  if (x == "data") {
    var search_asal = encodeURIComponent($("#originSelect").val() || "");
    var search_tujuan = encodeURIComponent(
      $("#destinationSelect").val() || ""
    );
    var weight = encodeURIComponent($("#weight").val() || "");

    let url = "/detail?";

    if (search_asal) url += "search_asal=" + search_asal + "&";
    if (search_tujuan) url += "search_tujuan=" + search_tujuan + "&";
    if (weight) url += "weight=" + weight;
    if (y) url += "page=" + y;

    $(".load-data").load(url);
  }
}

$("#btnCari").on("click", function () {
  actControl("data");
});
</script>

<script>
  import { API_URL } from "@globals";

  $(document).ready(function () {
    $("#destinationSelect").prop("disabled", true);

    $("#originSelect").select2({
      placeholder: "Pilih Asal...",
      allowClear: true,
      minimumInputLength: 1,
      width: "100%",
      ajax: {
        url: API_URL + "/v1/origin",
        dataType: "json",
        delay: 250,
        data: function (params) {
          return {
            search: params.term,
          };
        },
        processResults: function (data) {
          return {
            results: data.data.list.map(function (item) {
              return {
                id: item.name,
                text: item.alt_name,
                fullData: item,
              };
            }),
          };
        },
        cache: true,
      },
    });

    $("#originSelect").on("select2:select", function (e) {
      const selected = e.params.data;
      const originName = selected.id;

      $("#destinationSelect").empty().trigger("change").prop("disabled", true);

      $.ajax({
        url:
          API_URL + `/v1/destination?search=${encodeURIComponent(originName)}`,
        dataType: "json",
        success: function (data) {
          const results = data.data.list || [];
          const newOptions = results.map((item) => ({
            id: item.name,
            text: item.alt_name,
          }));

          $("#destinationSelect").select2({
            data: newOptions,
            placeholder: "Pilih Tujuan...",
            width: "100%",
            allowClear: true,
          });

          $("#destinationSelect").prop("disabled", false);
        },
        error: function () {
          alert("Gagal mengambil tujuan dari server.");
        },
      });
    });

    $("#destinationSelect").select2({
      placeholder: "Pilih Tujuan...",
      width: "100%",
      allowClear: true,
    });
  });
</script>
